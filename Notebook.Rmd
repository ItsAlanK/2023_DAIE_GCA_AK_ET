---
title: "Virtual Reality Interventions: Evaluating Efficacy in the Treatment of GAD"
author: "Alan Kinsella, Erik Trujillo"
date: "13/12/2023"
output: html_document
---

<!-- This is what a comment looks like-->
### Table of Contents

<!-- 1. [Setup](#setup)
2. [Data Loading](#data-load) -->
1. [Abstract](#abstract)
2. [Introduction](#introduction)
3. [Initial Inspection](#inspection)
4. [Data Cleanup](#cleanup) 
5. [Method](#method)
6. [Results](#results)
7. [Discussion](#discussion)
8. [References](#references)

<!-- ### Setup <a name="setup"></a> -->
```{r include=FALSE}

# install.packages("tidyverse")
if(!require("knitr"))
library(knitr)

# Load the packages, loading tidyverse for readr, dplyr, magrittr, and ggplot2
if(!require("tidyverse"))
library(tidyverse)
```


```{r include=FALSE} 
#Setting this up to define all chunks to show both code and output: 
knitr::opts_chunk$set(echo = TRUE)

```

<!-- ### Data Loading <a name="data-load"></a> -->
<!-- Loading our Datasets into R Studio -->
```{r include=FALSE} 
control_group <- read_csv("GROUP_12_2023_GCA_RESULTS_CONTROL.csv")
experimental_group <- read_csv("GROUP_12_2023_GCA_RESULTS_EXPERIMENTAL.csv")

```


### Abstract <a name="abstract"></a>

As of 2019, approximately 301 million people globally suffer from anxiety disorders, characterized by persistent feelings of anxiety and fear. Virtual Reality (VR) has emerged as a promising therapeutic tool, offering immersive exposure experiences for controlled treatment. Studies demonstrate VR's effectiveness in reducing symptoms of post-traumatic stress disorder and acrophobia, indicating its transformative potential in anxiety disorder treatments. Non-pharmacological therapies, notably Cognitive Behavioral Therapy, are commonly used for Generalized Anxiety Disorder (GAD), employing approaches like Imaginal Exposure Therapy and Stress Inoculation Training. Severity assessment often involves self-report mechanisms such as the State-Trait Anxiety Inventory and Generalized Anxiety Disorder 7-item scale, both scaled from 0 to 10, contributing to a nuanced understanding of anxiety disorders and guiding tailored therapeutic interventions.

This study will look at the results of an experiment comparing GAD and STAI scores of patients treated using traditional CBT (Control Group) and VR Therapy (Experimental Group) to identify the degree to which VR therapy has an effect compartive to proven therapy techniques.


### Introduction <a name="introduction"></a>



### Initial Inspection <a name="inspection"></a>
Initial inspection shows the same data types on both datasets. Patients are categorized by gender, and there are numeric scores for Generalized Anxiety Disorder (GAD) and State-Trait Anxiety Inventory (STAI). We have results both for pretrial testing and post trial testing. 

```{r echo=FALSE} 
# Display the first few rows of the datasets (Removes 3rd row which just shows data types)
# Ref for how to remove data types: https://stackoverflow.com/questions/64734495/suppressing-the-column-classes-for-tibbles
```

#### Control Group
```{r echo=FALSE} 
cat(format(head(control_group))[-3L], sep = "\n")
```

#### Experimental Group
```{r echo=FALSE} 
cat(format(head(experimental_group))[-3L], sep = "\n")
```

The summary is showing some insight on how the data is distributed, there are also some outliers visible within the minimum values that might need to be looked at during our cleaning process. We need to first understand if negative values are possible in this type of results.

<!-- Summary of the datasets -->
#### Summary of Control Group
```{r echo=FALSE} 
 summary(control_group)
```

#### Summary of Experimental Group
```{r echo=FALSE} 
 summary(experimental_group)
```

### Data Cleanup <a name="cleanup"></a>
```{r include=FALSE}
# Check for missing values
cntlMissingCount <- sum(is.na(control_group)) 
expMissingCount <- sum(is.na(experimental_group)) 

# Verifying data types 
cntlDataTypes <- str(control_group) 
expDataTypes <- str(experimental_group) 

```


During the data cleanup stage we checked for any missing values and found `r cntlMissingCount` missing values in the control group and `r expMissingCount` missing values in the experimental group meaning no participants need to be removed for lack of data.

Upon inspecting data types by viewing the structure of the data, all data types match what they should:

- Patient ID, and test results are all numbers
- Gender are all character strings


#### Filtering values outside of test boundaries 
<!-- Filters each group to new dataset removing any results outside of what test results can be -->
<!-- GAD 0 - 21, STAI 20 - 80-->
```{r echo=FALSE}
control_group_cleaned <- control_group %>% filter(pretrial_GAD >= 0, pretrial_STAI >= 20, posttrial_GAD >= 0, posttrial_STAI >= 20, pretrial_GAD <= 21, pretrial_STAI <= 80, posttrial_GAD <= 21, posttrial_STAI <= 80)
```

``` {r echo=FALSE}
experimental_group_cleaned <- experimental_group %>% filter(pretrial_GAD >= 0, pretrial_STAI >= 0, posttrial_GAD >= 0, posttrial_STAI >= 0, , pretrial_GAD <= 21, pretrial_STAI <= 80, posttrial_GAD <= 21, posttrial_STAI <= 80) 
```



Data has also been cleaned above to remove any test responses outside of the test boundaries. GAD test have a lower score limit of 0 and an upper limit of 21, while STAI has a lower and upper limit of 20 and 80 respectively. When compared to earlier data chunks we can see that no values min or max for any test lie outside of expected results now and we have no invalid values either. See [references for sources on test boundaries](#references)

#### Summary of Control Group After Cleanup
``` {r echo=FALSE}
summary(control_group_cleaned) 
```

#### Summary of Experimental Group After Cleanup
``` {r echo=FALSE}
summary(experimental_group_cleaned) 
```

```{r include=FALSE}
count_control_cleaned <- count(control_group_cleaned)
count_experimental_cleaned <- count(experimental_group_cleaned)
```

After cleaning, the count of results remained even with `r count_control_cleaned` results for both control and experimental group so further sampling is not required.

### Hypothesis Formulation

After our initial inspection of the data, based on the  difference in means from the pretrial results and the post trial results, we have come to following hypothesis:

- **Null Hypothesis (H0):** VR-based therapy does not have a significant difference in effectiveness from traditional CBT therapy in treating Generalized Anxiety Disorder (GAD).

- **Alternative Hypothesis (H1):** Traditional CBT therapy is significantly more effective than VR-based therapy in treating Generalized Anxiety Disorder (GAD).

### Data deep dive 

``` {r echo=TRUE}
# Adding a 'group' column to each dataset, this is so we can combine them next and we can keep differentiating them. 
control_group_cleaned$group <- 'Control'
experimental_group_cleaned$group <- 'Experimental'

# Combining the datasets, this will help us compare the data in different plots.
combined_groups <- rbind(control_group_cleaned, experimental_group_cleaned)

# Visualizing the pre-trial GAD scores by group using a boxplot
ggplot(combined_groups, aes(x = group, y = pretrial_GAD, fill = group)) +
    geom_boxplot() +
    labs(title = "Pre-Trial GAD Scores by Group", x = "Group", y = "Pre-Trial GAD Score")

control_pretrial_GAD_mean <- mean(control_group_cleaned$pretrial_GAD)
control_posttrial_GAD_mean <- mean(control_group_cleaned$posttrial_GAD)
control_pretrial_GAD_mean
control_posttrial_GAD_mean

# Visualizing the post-trial GAD scores by group using a boxplot
ggplot(combined_groups, aes(x = group, y = posttrial_GAD, fill = group)) +
    geom_boxplot() +
    labs(title = "Post-Trial GAD Scores by Group", x = "Group", y = "Post-Trial GAD Score")

experimental_pretrial_GAD_mean <- mean(experimental_group_cleaned$pretrial_GAD)
experimental_posttrial_GAD_mean <- mean(experimental_group_cleaned$posttrial_GAD)
experimental_pretrial_GAD_mean
experimental_posttrial_GAD_mean

# Visualizing the pre-trial STAI scores by group using a boxplot
ggplot(combined_groups, aes(x = group, y = pretrial_STAI, fill = group)) +
    geom_boxplot() +
    labs(title = "Pre-Trial STAI Scores by Group", x = "Group", y = "Pre-Trial STAI Score")

control_pretrial_STAI_mean <- mean(control_group_cleaned$pretrial_STAI)
control_posttrial_STAI_mean <- mean(control_group_cleaned$posttrial_STAI)
control_pretrial_STAI_mean
control_posttrial_STAI_mean

# Visualizing the post-trial STAI scores by group using a boxplot
ggplot(combined_groups, aes(x = group, y = posttrial_STAI, fill = group)) +
    geom_boxplot() +
    labs(title = "Post-Trial STAI Scores by Group", x = "Group", y = "Post-Trial STAI Score")

experimental_pretrial_STAI_mean <- mean(experimental_group_cleaned$pretrial_STAI)
experimental_posttrial_STAI_mean <- mean(experimental_group_cleaned$posttrial_STAI)
experimental_pretrial_STAI_mean
experimental_posttrial_STAI_mean
```




### Method <a name="method"></a>




### Results <a name="results"></a>




### Discussion <a name="discussion"></a>




### References <a name="references"></a>


- [Code for Knitr](https://argoshare.is.ed.ac.uk/healthyr_book/the-anatomy-of-a-notebook-r-markdown-file.html)
- [STAI Min & Max values](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6945947/#:~:text=Each%20question%20is%20rated%20on,T%20and%20STAI%2DS%20subscales.)
- [GAD Min & Max values](https://www.corc.uk.net/outcome-experience-measures/generalised-anxiety-disorder-assessment-gad-7/#:~:text=GAD%2D7%20total%20score%20for%20the%20seven%20items%20ranges%20from%200%20to%2021.)